!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("date-fns"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ngx-tiny/date-picker",["exports","@angular/core","@angular/forms","date-fns","@angular/common"],t):t(((e=e||self)["ngx-tiny"]=e["ngx-tiny"]||{},e["ngx-tiny"]["date-picker"]={}),e.ng.core,e.ng.forms,e.DateFns,e.ng.common)}(this,(function(e,t,n,i,a){"use strict";var r=function(e,t){return i.isSameDay(e,t)&&i.isSameMonth(e,t)&&i.isSameYear(e,t)},s=function(e,t){return{start:e?new Date(e.getTime()):null,end:t?new Date(t.getTime()):null}},o=function(e){return null==e},c=0,d=function(){function e(){var e=this;this.isOpened=!0,this.valueChange=new t.EventEmitter,this.currentOptions={closeOnClickOutside:!1,closeOnSelection:!0,includeDays:"all",includeNextMonthsFirstFullWeek:!1,minYear:1900,maxYear:2050,displayFormat:"MMM d, yyyy",barTitleFormat:"MMM yyyy",dayNamesFormat:"EEEEEE",rangeSeparator:"-",selectRange:!1,firstCalendarDay:0,barTitleIfEmpty:"Click to select a date",locale:{},fieldId:this.defaultFieldId,useEmptyBarTitle:!0,mobileStyle:"dialog"},this.onTouchedCallback=function(){},this.onChangeCallback=function(t){e.valueChange.emit(t)},this.formatDay=function(t,n){return void 0===n&&(n=!0),{date:t,day:i.getDate(t),month:i.getMonth(t),year:i.getYear(t),inThisMonth:i.isSameMonth(t,e.viewingDate),isToday:n&&i.isToday(t),isSelected:n&&e.isDateSelected(t),isInRange:n&&e.isInRange(t),isSelectable:n&&e.isDateSelectable(t),isStart:n&&e.isRangeBoundary(t,"start"),isEnd:n&&e.isRangeBoundary(t,"end"),isVisible:n}}}return e.prototype.setDisabledState=function(e){this.disabled=e},Object.defineProperty(e.prototype,"range",{get:function(){return this._range},set:function(e){this._range=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapperStyle",{get:function(){switch(this.currentOptions.mobileStyle){case"dialog":return!1===this.isInline?"form-date":"inline-date";case"normal":default:return""}},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){if(void 0===i.startOfMonth)throw new Error("module date-fns is required by <ngx-date-picker> to function.");this.view="days",this.range=this.range||{start:new Date,end:new Date},!this.value||this.value instanceof Date?this.value&&this.value instanceof Date?this.viewingDate=this.value:this.viewingDate=this.range.start:(this.range=this.value,this.viewingDate=this.range.start),this.updateOptions(this.options),this.initDayNames(),this.initYears(),this.initMonths(),this.init()},e.prototype.ngOnChanges=function(e){"options"in e&&(this.updateOptions(e.options.currentValue),this.initDayNames(),this.init(),this.initYears(),this.initMonths())},Object.defineProperty(e.prototype,"defaultFieldId",{get:function(){var e="ngx-date-picker-"+c++;return Object.defineProperty(this,"defaultFieldId",{value:e}),e},enumerable:!1,configurable:!0}),e.prototype.updateOptions=function(e){this.currentOptions=Object.assign(Object.assign({},this.currentOptions),e)},e.prototype.writeValue=function(e){if(e){if("string"==typeof e)this.range.start=this.range.end=new Date(e);else if(e instanceof Date)this.range.start=this.range.end=e;else{if(!e.start)throw Error("Invalid input data type");this.range=e}this.viewingDate=this.range.start||this.viewingDate||new Date,this.init()}},e.prototype.registerOnChange=function(e){this.onChangeCallback=e},e.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},e.prototype.getDayClasses=function(e){return{"is-prev-month":!e.inThisMonth,"is-today":e.isToday,"is-selected":e.isSelected,"is-in-range":e.isInRange,"is-disabled":!e.isSelectable,"range-start":e.isStart,"range-end":e.isEnd,"is-visible":e.isVisible}},e.prototype.isDateSelectable=function(e){var t=!o(this.currentOptions.minDate),n=!o(this.currentOptions.maxDate),i=e.valueOf(),a=!t||i>=this.currentOptions.minDate.valueOf(),r=!n||i<=this.currentOptions.maxDate.valueOf();return a&&r},e.prototype.isDateSelected=function(e){return!(!this.range||!this.range.start)&&(r(e,this.range.start)||r(e,this.range.end))},e.prototype.isInRange=function(e){return!!(this.isDateSelected(e)||this.range&&this.range.start)&&(i.isAfter(e,this.range.start)&&i.isBefore(e,this.range.end))},e.prototype.formatDisplay=function(){if(!this.range)return"";var e=i.format(this.range.start,this.currentOptions.displayFormat,this.currentOptions.locale);if(this.currentOptions.selectRange){var t=i.format(this.range.end||this.range.start,this.currentOptions.displayFormat,this.currentOptions.locale);return e+" "+this.currentOptions.rangeSeparator+" "+t}return e},e.prototype.isRangeBoundary=function(e,t){return!!this.range&&(!this.range[t]||r(e,this.range[t]))},e.prototype.getValueToEmit=function(e){return e&&e.start?this.currentOptions.selectRange?e.end?s(e.start,e.end):s(e.start,e.start):new Date(e.start.getTime()):null},e.prototype.init=function(){var e=this;if(this.viewingDate){var t=i.startOfMonth(this.viewingDate),n=i.endOfMonth(this.viewingDate);this.days=i.eachDayOfInterval({start:t,end:n}).map((function(t){return e.formatDay(t)}));var a=i.getDay(t)-this.currentOptions.firstCalendarDay,r=a<0?7-this.currentOptions.firstCalendarDay:a,s=(1===this.currentOptions.firstCalendarDay?7:6)-i.getDay(n),o="all"===this.currentOptions.includeDays||"previous-month"===this.currentOptions.includeDays,c="all"===this.currentOptions.includeDays||"next-month"===this.currentOptions.includeDays;c&&this.currentOptions.includeNextMonthsFirstFullWeek&&(s+=7);for(var d=1;d<=r;d++)this.days.unshift(this.formatDay(i.subDays(t,d),o));new Array(s).fill(void 0).forEach((function(t,a){return e.days.push(e.formatDay(i.addDays(n,a+1),c))})),this.displayValue=this.formatDisplay(),this.range?this.barTitle=i.format(this.viewingDate,this.currentOptions.barTitleFormat,this.currentOptions.locale):this.barTitle=this.currentOptions.useEmptyBarTitle?this.currentOptions.barTitleIfEmpty:i.format(this.viewingDate,this.currentOptions.barTitleFormat,this.currentOptions.locale)}},e.prototype.setDate=function(e){var t=this.days[e].date,n=this.range||{};this.currentOptions.selectRange?this.range&&(this.range.start||this.range.end)?this.range.start&&!this.range.end&&i.isAfter(t,this.range.start)?n.end=t:(n.end=void 0,n.start=t):n.start=t:n.start=n.end=t,this.range=n,this.init(),this.onChangeCallback(this.getValueToEmit(this.range)),this.currentOptions.closeOnSelection&&this.range.end&&this.close()},e.prototype.initDayNames=function(){this.dayNames=[];for(var e=this.currentOptions.firstCalendarDay,t=e;t<=6+e;t++){var n=i.setDay(new Date,t);this.dayNames.push(i.format(n,this.currentOptions.dayNamesFormat,this.currentOptions.locale))}},e.prototype.setMonth=function(e){this.viewingDate=i.setMonth(this.viewingDate,this.months[e].month),this.init(),this.initMonths(),this.view="days"},e.prototype.initMonths=function(){var e=this;this.months=Array.from(new Array(12),(function(e,t){return i.setMonth(new Date,t)})).map((function(t){return{month:t.getMonth(),name:i.format(t,"MMM"),isSelected:t.getMonth()===i.getMonth(e.viewingDate)}}))},e.prototype.nextMonth=function(){this.viewingDate=i.addMonths(this.viewingDate,1),this.init()},e.prototype.prevMonth=function(){this.viewingDate=i.subMonths(this.viewingDate,1),this.init()},e.prototype.initYears=function(){var e=this,t=this.currentOptions.maxYear-this.currentOptions.minYear;this.years=Array.from(new Array(t),(function(t,n){return{index:n,year:n+e.currentOptions.minYear}})).map((function(t){var n=t.index,a=t.year;return{index:n,year:a,isThisYear:a===i.getYear(e.viewingDate)}}))},e.prototype.scrollYears=function(){var e=this;setTimeout((function(){var t=e.years.filter((function(e){return e.isThisYear}))[0].index/3*40-30;e.calendarYearsContainer.nativeElement.scroll(0,t)}),100)},e.prototype.setYear=function(e){this.viewingDate=i.setYear(this.viewingDate,this.years[e].year),this.init(),this.initYears(),this.view="months"},e.prototype.toggleView=function(){this.view="days"===this.view?"years":"days",this.scrollYears()},e.prototype.toggle=function(){this.isOpened=!this.isOpened,this.isOpened||"years"!==this.view||this.toggleView(),this.isOpened&&"days"===this.view&&(this.viewingDate=this.range&&this.range.start?this.range.start:this.viewingDate||new Date,this.init())},e.prototype.reset=function(){this.range={start:new Date,end:new Date},this.init()},e.prototype.onBlur=function(e){this.isOpened&&this.currentOptions.closeOnClickOutside&&(e.target.parentElement&&e.target.parentElement.classList.contains("day-unit")||this.calendarContainerElement.nativeElement===e.target||this.calendarContainerElement.nativeElement.contains(e.target)||e.target.classList.contains("year-unit")||e.target.classList.contains("month-unit")||this.close())},e.prototype.close=function(){this.isOpened=!1,"years"===this.view&&this.toggleView()},e}();d.decorators=[{type:t.Component,args:[{selector:"ngx-date-picker",template:'<div *ngIf="isOpened" class="ngx-date-picker-calendar-wrapper {{wrapperStyle}}">\r\n\r\n  <div #container class="ngx-date-picker-calendar-container">\r\n\r\n    \x3c!-- Top Bar --\x3e\r\n    <div class="ngx-date-picker-navbar">\r\n\r\n      <div class="ngx-date-picker-navbar-item" (click)="prevMonth()">\r\n        <i class="arrow left"></i>\r\n      </div>\r\n\r\n      <span class="ngx-date-picker-title" (click)="toggleView()">{{ barTitle }}</span>\r\n\r\n      <div class="ngx-date-picker-navbar-item" (click)="nextMonth()">\r\n        <i class="arrow right"></i>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div class="main-calendar-container">\r\n\r\n      \x3c!-- Days --\x3e\r\n      <div [ngClass]="{ \'show\': view === \'days\', \'hidden\': view !== \'days\' }">\r\n        <div class="main-calendar-day-names">\r\n          <span class="day-name-unit" *ngFor="let name of dayNames">{{ name }}</span>\r\n        </div>\r\n        <div class="main-calendar-days">\r\n          <span class="day-unit" *ngFor="let day of days; let i = index;" (click)="day.isSelectable && setDate(i)">\r\n            <span class="day-background-upper"\r\n              [ngClass]="this.getDayClasses(day)">{{ day.isVisible ? day.day : \'\' }}</span>\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!-- Months --\x3e\r\n      <div [ngClass]="{ \'show\': view === \'months\', \'hidden\': view !== \'months\' }">\r\n        <div class="main-calendar-months">\r\n          <span *ngFor="let month of months; let i = index;" class="month-unit"\r\n            [ngClass]="{ \'is-selected\': month.isSelected}" (click)="setMonth(i)">\r\n            {{ month.name }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!-- Years --\x3e\r\n      <div [ngClass]="{ \'show\': view === \'years\', \'hidden\': view !== \'years\' }">\r\n        <div #calendarYearsContainer class="main-calendar-years">\r\n          <span *ngFor="let year of years; let i = index;" class="year-unit"\r\n            [ngClass]="{ \'is-selected\': year.isThisYear }" (click)="setYear(i)">\r\n            {{ year.year }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n\r\n  </div>\r\n</div>',encapsulation:t.ViewEncapsulation.None,providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return d})),multi:!0}],styles:[".ngx-date-picker-calendar-container{background:#fff;border:1px solid #dfe3e9;border-radius:4px;box-shadow:0 10px 14px 10px rgba(0,0,0,.08);max-width:100vw;position:absolute;width:300px;z-index:100}@media (max-width:768px){.ngx-date-picker-calendar-wrapper.form-date{background:hsla(0,0%,78.4%,.5);height:100vh;left:0;position:fixed;top:0;width:100vw;z-index:9999}.ngx-date-picker-calendar-wrapper.form-date .ngx-date-picker-calendar-container{left:50%;max-width:100vw;top:50%;transform:translate(-50%,-50%);width:90vw}.ngx-date-picker-calendar-wrapper.form-date .ngx-date-picker-title{font-size:1rem}.ngx-date-picker-calendar-wrapper.form-date .day-unit,.ngx-date-picker-calendar-wrapper.form-date .month-unit,.ngx-date-picker-calendar-wrapper.form-date .year-unit{font-size:1rem;height:2rem}}.ngx-date-picker-navbar{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;align-items:center;border-bottom:1px solid #dfe3e9;display:flex;height:50px;justify-content:space-between;user-select:none}.ngx-date-picker-navbar .ngx-date-picker-navbar-item{cursor:pointer;padding:16px}.ngx-date-picker-navbar .ngx-date-picker-navbar-item .arrow{border:solid #000;border-width:0 3px 3px 0;display:inline-block;padding:3px}.ngx-date-picker-navbar .ngx-date-picker-navbar-item .arrow.right{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.ngx-date-picker-navbar .ngx-date-picker-navbar-item .arrow.left{-webkit-transform:rotate(135deg);transform:rotate(135deg)}.ngx-date-picker-title{color:#3d495c;cursor:pointer;font-size:14px;font-weight:600}.main-calendar-container{box-sizing:border-box;font-size:12px;font-weight:500;height:100%;padding:15px 10px;width:100%}.main-calendar-container .show{display:block}.main-calendar-container .hidden{display:none}.main-calendar-day-names{align-items:center;box-sizing:border-box;color:#cbcbcb;display:flex;width:100%}.day-name-unit{margin:5px 5px 0 0;text-align:center;text-transform:uppercase;width:14.28571%}.main-calendar-days{overflow:hidden}.main-calendar-days,.main-calendar-years{display:inline-block;padding:15px 0 0;width:100%}.main-calendar-years{overflow-x:hidden;overflow-y:scroll}.main-calendar-years::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#f5f5f5}.main-calendar-years::-webkit-scrollbar{background-color:#f5f5f5;width:6px}.main-calendar-years::-webkit-scrollbar-thumb{background-color:#000}.day-unit,.month-unit,.year-unit{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;cursor:pointer;float:left;font-size:14px;font-weight:400;height:35px;margin:5px 5px 0 0;position:relative;user-select:none;width:calc(14.28571% - 5px)}.day-background-upper,.day-unit,.month-unit,.year-unit{align-items:center;display:inline-flex;justify-content:center}.day-background-upper{background:#f0f0f0;border-radius:4px;color:#333;height:100%;position:absolute;width:100%;z-index:1}.day-background-upper:not(.is-visible){cursor:default}.day-background-upper:hover{background:rgba(255,0,0,.6);color:#f0f0f0}.day-background-upper.is-prev-month{color:#cbcbcb}.day-background-upper.is-prev-month:hover{background:rgba(255,0,0,.6);color:#f0f0f0}.day-background-upper.is-disabled{color:#cbcbcb;cursor:not-allowed}.day-background-upper.is-in-range{background:rgba(255,0,0,.6);color:#f0f0f0}.day-background-upper.is-selected{background:red;color:#f0f0f0}.main-calendar-years{display:block;height:210px;padding:0}.month-unit{height:54px;width:calc(25% - 5px)}.year-unit{width:calc(33.33333% - 5px)}.month-unit,.year-unit{border-radius:4px}.month-unit.is-selected,.year-unit.is-selected{background:red;color:#f0f0f0}.month-unit:hover,.year-unit:hover{background:rgba(255,0,0,.6);color:#f0f0f0}.main-calendar-months{display:inline-block;padding-bottom:10px}"]}]}],d.propDecorators={calendarContainerElement:[{type:t.ViewChild,args:["container"]}],calendarYearsContainer:[{type:t.ViewChild,args:["calendarYearsContainer"]}],value:[{type:t.Input}],options:[{type:t.Input}],isOpened:[{type:t.Input}],valueChange:[{type:t.Output}],onBlur:[{type:t.HostListener,args:["document:click",["$event"]]}]};var l=function(){function e(e){this._el=e,this.valueChange=new t.EventEmitter,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){var e=this;if(!this.datePickerInstance)throw new Error("Instance of <ngx-date-picker> is required for directive.");this.datePickerInstance.isOpened=!1,this.datePickerInstance.isInline=!1,this.datePickerInstance.currentOptions.closeOnClickOutside=!1,this.onChangeSubscription=this.datePickerInstance.valueChange.subscribe((function(t){e._el.nativeElement.value=e.datePickerInstance.formatDisplay(),e.valueChange.emit(t),e.onChange(t)}))},e.prototype.ngAfterViewInit=function(){this.value&&(this.value instanceof Date?this.datePickerInstance.range=s(this.value,this.value):this.datePickerInstance.range=this.value,this.datePickerInstance.valueChange.emit(this.datePickerInstance.getValueToEmit(this.datePickerInstance.range)))},e.prototype.ngOnDestroy=function(){this.onChangeSubscription&&this.onChangeSubscription.unsubscribe()},e.prototype.writeValue=function(e){e instanceof Date?this.datePickerInstance.range=s(e,e):this.datePickerInstance.range=e,this.datePickerInstance.valueChange.emit(this.datePickerInstance.getValueToEmit(this.datePickerInstance.range))},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.datePickerInstance.disabled=e},e.prototype.onClick=function(e){this.datePickerInstance.toggle()},e.prototype.onBlur=function(e){this.datePickerInstance.isOpened&&(e.target.parentElement&&e.target.parentElement.classList.contains("day-unit")||this._el.nativeElement===e.target||this.datePickerInstance.calendarContainerElement.nativeElement.contains(e.target)||e.target.classList.contains("year-unit")||e.target.classList.contains("month-unit")||this.datePickerInstance.close())},e}();l.decorators=[{type:t.Directive,args:[{selector:"[ngxDatePicker]",providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return l})),multi:!0}]}]}],l.ctorParameters=function(){return[{type:t.ElementRef}]},l.propDecorators={datePickerInstance:[{type:t.Input,args:["ngxDatePicker"]}],value:[{type:t.Input}],valueChange:[{type:t.Output}],onClick:[{type:t.HostListener,args:["click",["$event"]]}],onBlur:[{type:t.HostListener,args:["document:click",["$event"]]}]};var h=function(){};h.decorators=[{type:t.NgModule,args:[{declarations:[d,l],imports:[a.CommonModule,n.FormsModule],exports:[d,l,a.CommonModule,n.FormsModule]}]}],e.NgxDatePickerComponent=d,e.NgxDatePickerModule=h,e.ɵa=l,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-tiny-date-picker.umd.min.js.map